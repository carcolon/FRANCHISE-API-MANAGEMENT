<div class="wrapper">
  <section class="card">
    <div class="brand">
      <div class="logo">FM</div>
      <h1>Recuperar acceso</h1>
      <p>Ingresa tu usuario y generaremos un token temporal.</p>
    </div>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
      <label for="username">Usuario</label>
      <input
        id="username"
        type="text"
        formControlName="username"
        placeholder="admin"
        [class.invalid]="form.controls.username.invalid && form.controls.username.touched"
      />

      <button type="submit" class="primary" [disabled]="submitting()">
        {{ submitting() ? 'Enviando...' : 'Solicitar token' }}
      </button>
    </form>

    <p class="alert success" *ngIf="success()">
      {{ success()?.message }}
      <ng-container *ngIf="success()?.resetToken">
        <br />
        <strong>Token:</strong>
        <code>{{ success()?.resetToken }}</code>
        <br />
        Copia este token y dirigete al formulario de restablecimiento.
      </ng-container>
    </p>

    <p class="alert error" *ngIf="error()">{{ error() }}</p>

    <div class="links">
      <a routerLink="/reset-password">Ya tengo un token</a>
      <a routerLink="/login">Volver al inicio de sesion</a>
    </div>
  </section>
</div>
