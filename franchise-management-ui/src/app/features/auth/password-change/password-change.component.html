<div class="overlay" *ngIf="visible">
  <section class="modal">
    <header>
      <h2>Actualiza tu contrasena</h2>
      <p>Por seguridad, debes cambiar la contrasena temporal antes de continuar.</p>
    </header>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
      <label for="currentPassword">Contrasena actual</label>
      <input
        id="currentPassword"
        type="password"
        formControlName="currentPassword"
        placeholder="********"
        [disabled]="submitting()"
        [class.invalid]="form.controls.currentPassword.invalid && form.controls.currentPassword.touched"
      />

      <label for="newPassword">Nueva contrasena</label>
      <input
        id="newPassword"
        type="password"
        formControlName="newPassword"
        placeholder="********"
        [disabled]="submitting()"
        [class.invalid]="form.controls.newPassword.invalid && form.controls.newPassword.touched"
      />
      <div class="field-hint">
        Debe tener al menos 8 caracteres y combinar mayusculas, minusculas y numeros para mayor seguridad.
      </div>

      <label for="confirmPassword">Confirma la nueva contrasena</label>
      <input
        id="confirmPassword"
        type="password"
        formControlName="confirmPassword"
        placeholder="********"
        [disabled]="submitting()"
        [class.invalid]="form.controls.confirmPassword.invalid && form.controls.confirmPassword.touched"
      />

      <button type="submit" class="primary" [disabled]="submitting()">
        {{ submitting() ? 'Guardando...' : 'Actualizar contrasena' }}
      </button>
    </form>

    <p class="alert success" *ngIf="success()">{{ success() }}</p>
    <p class="alert error" *ngIf="error()">{{ error() }}</p>
  </section>
</div>
