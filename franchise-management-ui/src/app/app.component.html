<div class="app-shell">
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand" routerLink="/franchises">
        <div class="logo">FM</div>
        <div class="brand-text">
          <strong>Franchise API Management</strong>
          <span>Enterprise Control Center</span>
        </div>
      </div>
      <nav *ngIf="isAuthenticated()">
        <a
          *ngFor="let item of navigation()"
          [routerLink]="item.path"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
        >
          {{ item.label }}
        </a>
      </nav>
      <div class="user-chip" *ngIf="isAuthenticated(); else loginLink">
        <div>
          <span class="status" [class.admin]="isAdmin()"></span>
        </div>
        <div class="user-meta">
          <strong>{{ user()?.username }}</strong>
          <small>{{ isAdmin() ? 'Administrador' : 'Usuario' }}</small>
        </div>
        <button type="button" class="ghost" (click)="logout()">Salir</button>
      </div>
      <ng-template #loginLink>
        <a routerLink="/login" class="login-btn">Iniciar sesi√≥n</a>
      </ng-template>
    </div>
  </header>

  <main class="content">
    <router-outlet />
  </main>

  <footer class="footer">
    &copy; {{ currentYear }} Franchise API Management - Plataforma interna
  </footer>
</div>

<app-password-change-modal
  [visible]="mustChangePassword()"
></app-password-change-modal>
